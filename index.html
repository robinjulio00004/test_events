<!doctype html>
<!--eventos en modelos 3D en CNC-->
<html lang="en-US">
	<head>
	<meta charset="utf-8"/> 
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="apple-mobile-web-app-capable" content="yes">
    	<script src="aframe-v1.6.0.min.js"></script>
    	<script src="aframe-ar.js"></script>
		<script src="animation-mixer.js"></script>
		<script src="aframe-extras.js"></script>
	</head>
<body style="margin : 0px; overflow: hidden;">		 
	<!-- Scene -->
	<a-scene arjs embedded renderer="logarithmicDepthBuffer: true;" xr-mode-ui="enabled: true">
	<!-- Asset Management -->	
	<a-assets>
    <a-asset-item id="modelo3d" src="puerta_sc2.glb"></a-asset-item>
  	</a-assets>
		
	<a-entity id="modelo1" gltf-model="#modelo3d" position="0 0 0" rotation="90 0 90" scale="0.5 0.5 0.5"
		animation-mixer="clip: Anim;timeScale:0;">
	</a-entity>
		
	<a-box id="boton1" position="0 0.6 0" scale="0.5 0.5 0.1" color="red">
	<a-text value="Abrir puerta" align="center" position="0 0 0.51" rotation="0 0 90" color="white"></a-text>
	</a-box>

		<a-box id="boton2" position="0 -0.6 0" scale="0.5 0.5 0.1" color="blue">
	<a-text value="Cerrar puerta" align="center" position="0 0 0.51" rotation="0 0 90" color="white"></a-text>
	</a-box>
	    <!--<a-plane position="0 1 -3" width="1" height="0.5" color="blue">
        <a-text value="Click Me!" align="center" position="0 0 0.01" color="white"></a-text>
    </a-plane>-->
		
	<!-- Camera -->
	    <a-entity id="cameraview" position="0 0 6" rotation="0 0 90" look-controls-enabled="false" wasd-controls-enable="false"><!--look-controls-enabled="false"-->
		<a-camera id="mcamera" rotation="0 0 0">
  		<a-entity cursor="fuse: true; fuseTimeout: 500"
            	position="0 0 -3"
            	geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
           	material="color: green; shader: flat"></a-entity>
		</a-camera>
		</a-entity>
		</a-entity>
		
	</a-scene>
</body>
	<script>
		let modelo3d= document.getElementById("modelo1");
		let boton_open= document.getElementById("boton1");
		let boton_close= document.getElementById("boton2");
		let eboton1=false,eboton2=false;
		
		    boton_open.addEventListener('click', openClick);
			boton_close.addEventListener('click',closeClick);

			function openClick() 
			{
				if(eboton2===true)
				{
				boton_close.addEventListener('click',closeClick);
				eboton2=false;
				}
				else
				{
				modelo3d.setAttribute('animation-mixer','clip: Anim;timeScale: 0.3;');
				setTimeout(()=>{modelo3d.setAttribute('animation-mixer','timeScale: 0;'); },6000);/*retardo de 1000ms*/
				boton_open.removeEventListener('click',openClick);
				eboton1=true;
				}
   			}
						
			function closeClick() 
			{
				if(eboton1===true)
				{
				boton_open.addEventListener('click',openClick);
				eboton1=false;
				}
				else
				{
				modelo3d.setAttribute('animation-mixer','clip: Anim_reverse;timeScale: 0.3;');
				setTimeout(()=>{modelo3d.setAttribute('animation-mixer','timeScale: 0;'); },6000);/*retardo de 1000ms*/
				boton_close.removeEventListener('click',closeClick);
				eboton2=true;
				}
    		}
	</script>
</html>


























